{% extends "relationship_app/base.html" %}

{% block title %}{{ action }} Book - Library System{% endblock %}

{% block content %}
<div class="page-header">
    <h1>📖 {{ action }} Book</h1>
    <p>{% if action == 'Add' %}Add a new book to the library{% else %}Edit book details{% endif %}</p>
</div>

<div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto;">
    
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    
    <form method="post">
        {% csrf_token %}
        
        <div style="margin-bottom: 20px;">
            <label for="title" style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                Book Title:
            </label>
            <input type="text" id="title" name="title" 
                   value="{% if book %}{{ book.title }}{% endif %}"
                   style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px;"
                   placeholder="Enter book title" required>
        </div>
        
        <div style="margin-bottom: 30px;">
            <label for="author" style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                Author:
            </label>
            <select id="author" name="author" 
                    style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px;"
                    required>
                <option value="">Select an author</option>
                {% for author in authors %}
                <option value="{{ author.id }}" 
                        {% if book and book.author.id == author.id %}selected{% endif %}>
                    {{ author.name }}
                </option>
                {% endfor %}
            </select>
        </div>
        
        <div style="display: flex; gap: 15px; justify-content: flex-end;">
            <a href="{% url 'relationship_app:list_books' %}" 
               style="background: #6c757d; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px;">
                Cancel
            </a>
            <button type="submit" 
                    style="background: #4CAF50; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; cursor: pointer;">
                {{ action }} Book
            </button>
        </div>
    </form>
    
    {% if action == 'Edit' %}
    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
        <h3 style="color: #333; margin-bottom: 15px;">⚠️ Danger Zone</h3>
        <p style="color: #666; margin-bottom: 15px;">
            Permanently delete this book from the system.
        </p>
        <a href="{% url 'relationship_app:delete_book' book.id %}" 
           style="background: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px;">
            Delete Book
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
